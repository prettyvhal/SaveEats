<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SaveEats Restaurant Dashboard</title>
  <link rel="stylesheet" href="Scripts/site/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">

  <meta property="og:site_name" content="SaveEats" />
  <meta property="og:title" content="SaveEats" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Find affordable meals and help reduce food waste" />
  <meta property="og:image" content="https://drive.google.com/uc?export=view&id=1eM_uZaItPknvEKXwQeG6KiV4m7WFH7ex"/>
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link href="Resources/master-toggle.css" rel="stylesheet">
  <link href="Resources/clicks-toggle.css" rel="stylesheet">
  <link href="Resources/color-palette.css" rel="stylesheet">
  <link href="Resources/add-item.css" rel="stylesheet">
  <link href="Resources/log-out.css" rel="stylesheet">
  <link href="Resources/scanner.css" rel="stylesheet">
  <link rel="manifest" href="manifest.json">

  <!-- CSS for dark mode toggle button -->
  <link href="Resources/dark-mode-toggle.css" rel="stylesheet">

  <!-- Dark Reader API via jsDelivr CDN-->
  <script src="https://cdn.jsdelivr.net/npm/darkreader/darkreader.min.js"></script>
  
  <meta name="theme-color" content="#a3e4f9" />
  <link href="Resources/assets/icon1.png" rel="shortcut icon" type="image/x-icon" />
  <link href="Resources/assets/icon1.png" rel="apple-touch-icon" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <noscript>
    <style>
      body {
        overflow: auto !important;
      }

      #main {
        opacity: 1.0 !important;
        transform: none !important;
        transition: none !important;
        filter: none !important;
      }

      #main>.inner>section {
        opacity: 1.0 !important;
        transform: none !important;
        transition: none !important;
        filter: none !important;
      }

      #main>.inner>section>* {
        opacity: 1.0 !important;
        transform: none !important;
        transition: none !important;
        filter: none !important;
      }
    </style>
  </noscript>
</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 40 40"
    display="none" width="0" height="0">
    <symbol id="icon-8c067c2a901577560a630158598faca2" viewBox="0 0 40 40">
      <path
        d="M36.1,23.4c-0.8,3.5-2.6,6.1-5.3,8.5c-6.4,5.9-13.8,4.1-20.1-0.8 c-2.1-1.6-3.4-3.3-5-5.3c-0.5-0.6-1.7-1.7-1.1-2.5c0.1-0.2,0.9-0.6,1.1-0.6c1-0.2,0.9,0.5,1.4,1c2.6,3.4,5.4,6.1,9.3,8 c2.4,1.2,4.2,1.5,6.9,1.4c4.1-0.3,8.9-5.3,10.1-9c0.3-1.1,0.4-2.3,0.7-3.3c0.1-0.2,0.3-0.5,0.5-0.6c0.5-0.1,1.7-0.1,1.8,0.5 C36.6,21.2,36.3,22.7,36.1,23.4z M27.3,21.2c-0.5,0.2-1.1-0.1-1.3-0.5c-0.3-0.6-0.5-2-0.7-2.7c-0.8-3.7-1.4-7.7-3.6-10.9 c-0.2-0.3-0.6-0.3-0.8-0.4c-0.4-0.3-0.4-1.3-0.2-1.7c0-0.1,0.8-0.6,0.9-0.6c0.3-0.1,0.6,0,0.9,0.1c0.2,0.1,1.2,1,1.3,1.3 c2.3,3.7,2.9,7.3,3.8,11.5c0.2,0.7,0.7,2,0.7,2.6c0,0.3,0,0.6-0.2,0.8C28.1,20.7,27.4,21.2,27.3,21.2z M14.1,21.6 c-0.3-0.4-0.3-1.6-0.4-2.1c-0.6-3.4-2.3-7.1-4.4-9.9C9.1,9.3,8,8.2,7.9,7.9c-0.1-0.4-0.1-1,0.2-1.3c0.3-0.2,1.3-0.3,1.6-0.2 c0.4,0.2,0.8,0.8,1.1,1.1c2.4,2.8,4.3,6.5,5.1,10.2c0.2,1,0.6,2.8,0.4,3.7C16.2,22.2,14.5,22.1,14.1,21.6z" />
    </symbol>
  </svg>

  <div id="cursorCircle"></div>

  <div class="loading-screen">
    <div class="loading-animation"></div>
      <div class="waves back">
        <svg viewBox="0 24 150 28" preserveAspectRatio="none">
          <defs>
            <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
          </defs>
          <g class="wave-group">
            <use xlink:href="#gentle-wave" x="48" y="5"></use>
            <use xlink:href="#gentle-wave" x="20" y="7"></use>
            <use xlink:href="#gentle-wave" x="80" y="17"></use>
          </g>
        </svg>
      </div>
      
      <div class="waves front">
        <svg viewBox="0 24 150 28" preserveAspectRatio="none">
          <defs>
            <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
          </defs>
          <g class="wave-group">
            <use xlink:href="#gentle-wave" x="60" y="10"></use>
            <use xlink:href="#gentle-wave" x="30" y="23"></use>
            <use xlink:href="#gentle-wave" x="48" y="5"></use>
          </g>
        </svg>
      </div>
      
  </div>

    <button id="scannerBtn" class="scanner-btn">
        <i class="fa-solid fa-qrcode"></i>
    </button>

    <button id="addItemBtn" class="item-toggle">
        <i class="fa-solid fa-plus"></i>
    </button>

    <button class="log-out-toggle">
        <i class="fa-solid fa-power-off"></i>
    </button>

    <!-- Master Toggle -->
    <button class="master-toggle">
      <i class="fa-solid fa-angles-left"></i>
    </button>
  
    <!-- Hidden buttons -->
    <div class="extra-buttons">
      <button class="toggle-modal-btn">
        <i class="fa-solid fa-square-minus"></i>
      </button>
      
      <button class="palette-btn">
        <i class="fa-solid fa-brush"></i>
      </button>
      
      <button class="clicks-btn">
        <i class="fa-solid fa-volume-high"></i>
      </button>

      <button class="dark-mode-toggle">
        <i class="fa-solid fa-moon"></i>
      </button>
    </div>
  
  <!-- Palette Options -->
  <div class="palette-options">
    <div class="palette" data-palette="red"></div>
    <div class="palette" data-palette="orange"></div>
    <div class="palette" data-palette="green"></div>
    <div class="palette" data-palette="blue"></div>
    <div class="palette" data-palette="purple"></div>
    <div class="palette" data-palette="pink"></div>
    <div class="palette" data-palette="hue-shift"></div>
    <div class="hue-shift-control">
      <input type="range" id="hue-slider" min="0" max="360" value="0">
    </div>
  </div>

  <div class="background-scene">
    <div class="waves back">
      <svg viewBox="0 24 150 28" preserveAspectRatio="none">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
        </defs>
        <g class="wave-group">
          <use xlink:href="#gentle-wave" x="48" y="5"></use>
          <use xlink:href="#gentle-wave" x="20" y="7"></use>
          <use xlink:href="#gentle-wave" x="80" y="17"></use>
        </g>
      </svg>
    </div>
    
    <div class="waves front">
      <svg viewBox="0 24 150 28" preserveAspectRatio="none">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
        </defs>
        <g class="wave-group">
          <use xlink:href="#gentle-wave" x="60" y="10"></use>
          <use xlink:href="#gentle-wave" x="30" y="23"></use>
          <use xlink:href="#gentle-wave" x="48" y="5"></use>
        </g>
      </svg>
    </div>
    
  </div>

  <div class="window-container main-window">
    <div class="window-frame-home">
      <div class="window-header">
        <span class="window-title">Restaurant Dashboard</span>
      </div>
      <div class="home-window-content">

        <div class="fb-header">
          <div class="banner-container">
            <img id="bannerImage" src="Resources/assets/banner.webp" class="banner-img">
            <input type="file" id="bannerInput" hidden>
            <button class="edit-btn" id="editBannerBtn" data-target="banner-img-modal">Edit Banner</button>

            <div class="resto-rating1" id="bannerRating">
              <i class="star fa-solid fa-star"></i>
              <span id="averageRestoRating" class="average-rating">0.0</span>
            </div>
          </div>

          <div class="profile-row">
            <div class="profile-pic-wrapper">
              <img id="profileImage" src="Resources/assets/profile.jpg" class="profile-img">
              <input type="file" id="profileInput" hidden>
              <button class="edit-btn small" id="editProfileBtn" data-target="profile-img-modal">Edit</button>
            </div>

            <div class="profile-info">
                <h2 id="restoName">Restaurant Name</h2>
                <p id="restoEmail">email@example.com</p>
            </div>
            
            <div class="form-grid3">
              <div class="items-filter">
                <div>
                  <input type="text" id="itemSearch" placeholder="Search items by name..." class="search-input">
                </div>
                <select id="sortField" class="sort">
                  <option value="name">Name</option>
                  <option value="createdAt">Date Added</option>
                  <option value="expiryTime">Expiry Date</option>
                  <option value="originalPrice">Original Price</option>
                  <option value="discountedPrice">Discounted Price</option>
                </select>

                <select id="sortOrder" class="sort">
                  <option value="asc">Ascending</option>
                  <option value="desc">Descending</option>
                </select>
              </div>
            </div>
              
          </div>
        </div>
        
        <div class="project-grid-container">
          <div class="form-grid3">

          <div id="itemsGrid" class="items-grid">
            <div class="item-card"></div>
          </div>
          
          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- who reserved -->
  <div id="reserved-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-small">
        <div class="window-header handle">
          <span class="window-title">People who reserved this item: </span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="bg-container">

              <div class="form-grid2">
                  <div class="reserved-card"></div>
              </div>

          </div>
        </div>
      </div>
      <div class="nav-bar"></div>
    </div>
  </div>

  <!-- profile img -->
  <div id="profile-img-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-extra-small">
        <div class="window-header handle">
          <span class="window-title">Editing your profile photo</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="bg-container">

              <div class="form-grid2">

                <div class="crop-preview-container">
                  <canvas id="cropCanvas" width="200" height="200"></canvas>
                </div>
                
                <input type="text" id="usernameInput" placeholder="username" required>
                
                <input type="file" id="profileSelectInput" accept="image/*" hidden>
                <button type="button" id="profileSelectBtn" class="submit-btn1">
                  <i class="fa-solid fa-image"></i> Change Profile Photo
                </button>

                <button type="button" class="submit-btn" id="saveProfileBtn" 
                        onclick="handleActionClick(this, () => saveProfileProcess())">
                    <span class="btn-text">Save</span>
                    <i class="fa-solid fa-spinner fa-spin btn-spinner" style="display: none;"></i>
                </button>

              </div>

          </div>
        </div>
      </div>
      <div class="nav-bar"></div>
    </div>
  </div>

  <!-- banner img -->
  <div id="banner-img-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-small2">
        <div class="window-header handle">
          <span class="window-title">Editing your Banner photo</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content">
          <div class="bg-container">

              <div class="form-grid2">
                <div class="crop-preview-container">
                  <canvas id="cropBannerCanvas" width="400" height="225"></canvas>
                </div>
                
                <input type="file" id="bannerSelectInput" accept="image/*" hidden>
                <button type="button" id="bannerSelectBtn" class="submit-btn1">
                  <i class="fa-solid fa-image"></i> Change Banner Photo
                </button>

                <button type="button" class="submit-btn" id="saveBannerImage" 
                        onclick="handleActionClick(this, () => saveBannerProcess())">
                    <span class="btn-text">Save</span>
                    <i class="fa-solid fa-spinner fa-spin btn-spinner" style="display: none;"></i>
                </button>
              </div>

          </div>
        </div>
      </div>
      <div class="nav-bar"></div>
    </div>
  </div>

  <!-- Items -->
  <div id="Items-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-medium">
        <div class="window-header handle">
          <span class="window-title">Adding new Item</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">

          <form id="addItemForm">

            <!-- IMAGE PREVIEW -->
            <div class="form-grid3">
              <img id="itemPreviewImage" src="Resources/assets/food.png" class="item-preview-img">
              <input type="file" id="itemImageInput" accept="image/*" hidden>

              <div class="form-grid4">
                <button type="button" id="itemImgSelectBtn" class="submit-btn1">
                  <i class="fa-solid fa-image"></i> Choose from File
                </button>

                <button type="button" id="PasteImgBtn" class="submit-btn1 action-btn" 
                        onclick="handleActionClick(this, () => PasteImageFromClipboard())">
                    <span class="btn-text"><i class="fa-solid fa-image"></i> Paste from Clipboard</span>
                    <i class="fa-solid fa-spinner fa-spin btn-spinner" style="display: none;"></i>
                </button>
              </div>
            </div>

            <!-- ITEM NAME -->
            <div class="form-grid3">
              <div class="form-text1">Item Name</div>
              <input type="text" id="itemName" required>
            </div>

            <!-- DESCRIPTION -->
            <div class="form-grid3">
              <div class="form-text1">Description</div>
              <textarea id="itemDescription" rows="8"></textarea>
            </div>

            <!-- ORIGINAL PRICE -->
            <div class="form-grid3">
              <div class="form-text1">Price of the Item (₱)
                <button type="button" id="orig-help" class="help-btn">?</button></label>
              </div>
              <input type="number" id="itemOriginalPrice" required>
            </div>

            <!-- DISCOUNTED PRICE
            <div class="form-grid3">
              <label>Discounted Price (₱) <button type="button" id="disc-help" class="help-btn">?</button></label>
              <input type="number" id="itemDiscountedPrice" required>
            </div>  -->

            <!-- MINIMUM SELLING PRICE -->
            <div class="form-grid3">
              <div class="form-text1">Minimum Selling Price (₱)
                <button type="button" id="min-help" class="help-btn">?</button></label>
              </div>
              <input type="number" id="itemMinSellingPrice" required>
            </div>

            <!-- ITEM QUANTITY -->
            <div class="form-grid3">
              <div class="form-text1">Item Quantity</div>
              <input type="number" id="itemQuantity" required>
            </div>

            <!-- EXPIRATION TIME -->
            <div class="form-grid3">
              <div class="form-text1">When the Promo Expires</div>
              <input type="datetime-local" id="itemExpiry" required>
            </div>

            <!-- BUTTON -->
            <div class="bg-container">
              <div class="form-grid">
                <button type="submit" class="submit-btn" id="saveItemBtn">Save Item</button>
              </div>
            </div>

          </form>

        </div>
      </div>
      <div class="nav-bar"></div>
    </div>
  </div>

  <!-- scanner modal -->
  <div class="qr-backdrop" id="qrBackdrop"></div>
  <div id="qrSlideModal" class="qr-slide-modal">
    <div class="qr-slide-content">
      <div class="qr-slide-header">
        <div class="drag-bar"></div>
      </div>

      <div class="qr-center">
        <div id="qr-reader" style="width:300px;"></div>
          <button id="switchCamera" class="switch-camera" data-ignore-drag>
              <i class="fa-solid fa-camera"></i>
          </button>
      </div>
    </div>
  </div>

  <div id="imageZoomModal" class="modal-container image-zoom-overlay">
    <div class="zoom-wrapper">
      <button class="close-btn zoom-close">&times;</button>
      <img id="zoomedImage" src="" alt="Zoomed Preview">
      <div id="zoomInstructions" class="zoom-instructions">Tap image to Zoom</div>
    </div>
  </div>

  <!-- Submitted card -->
  <div id="submit-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-submit">
        <div class="window-header handle">
          <span class="window-title">Status</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-name">
                <h1><span class="cad-name">Sent!</span></h1>
                <i class="fa-solid fa-carrot fa-bounce"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="nav-bar"></div>
      </div>
    </div>
  </div>

  <!-- Error card -->
  <div id="error-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-error">
        <div class="window-header handle">
          <span class="window-title">Status</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-name">
                <h1><span class="cad-name">Error!</span></h1>
                <i class="fa-solid fa-heart-crack fa-shake"></i>
              </div>
            </div>
          </div>

          <div class="about-section">
            <h3 class="error-message"></h3>
          </div>

        </div>
        <div class="nav-bar"></div>
      </div>
    </div>
  </div>

  <!-- Notif card -->
  <div id="notif-modal" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-error">
        <div class="window-header handle">
          <span class="window-title">Status</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-name">
                <i class="fa-solid fa-carrot fa-bounce"></i>
              </div>
            </div>
          </div>

          <div class="about-section">
            <h3 class="notif-message"></h3>
          </div>

        </div>
        <div class="nav-bar"></div>
      </div>
    </div>
  </div>

  <!-- Notif card2 -->
  <div id="notif-modal2" class="modal-container">
    <div class="modal-window">
      <div class="modal-window-base modal-error">
        <div class="window-header handle">
          <span class="window-title">Status</span>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-content ">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-name">
                <i class="fa-solid fa-carrot fa-bounce"></i>
              </div>
            </div>
          </div>

          <div class="about-section">
            <h3 class="notif-message"></h3>

            <div class="bg-container">
              <div class="form-grid1">
                <button type="button" class="submit-btn" id="noBtn">No</button>
                <button type="button" class="submit-btn" id="yesBtn">Yes</button>
              </div>
            </div>
          </div>

        </div>
        <div class="nav-bar"></div>
      </div>
    </div>
  </div>

  </script>
  <script src="Scripts/site/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script src="Resources/dark-mode-toggle.js"></script>
  <!--<script src="Resources/email-submit.js"></script>-->
  <script src="Resources/clicks.js"></script>
  <!--<script src="Resources/projects.js"></script>-->
  <script src="Resources/master-toggle.js"></script>a
  <script type="module" src="Resources/color-palette-toggle.js"></script>
  <script src="Resources/cursor.js"></script>
  <script type="module" src="Scripts/site/firebase-init.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script type="module" src="Scripts/site/auth.js"></script>
  <script type="module" src="Scripts/site/resto.js"></script>
  <script type="module" src="Scripts/site/items.js"></script>
  </script>

  <script>
    window.addEventListener('load', () => {
      const loadingScreen = document.querySelector('.loading-screen');
      setTimeout(() => {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 500);
      }, 1500);
    });
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1
    });

    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  </script>
</body>

</html>